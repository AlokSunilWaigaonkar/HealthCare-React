{"ast":null,"code":"var _jsxFileName = \"/Users/alokwaigaonkar/health_care/FrontEnd/src/components/Doctor/Login.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport api from \"../../api\";\nimport \"../../css/login.css\";\nimport Navbar from \"../MainPage/Navbar\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Login() {\n  _s();\n  const navigate = useNavigate();\n  const [email, setemail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [errorClass, setErrorClass] = useState(\"error-box\");\n  const [loading, setLoading] = useState(false);\n  const handleInputChange = event => {\n    const {\n      name,\n      value\n    } = event.target;\n    if (name === \"email\") setemail(value);\n    if (name === \"password\") setPassword(value);\n  };\n  const handleSubmit = async event => {\n    event.preventDefault();\n    if (email === \"\" || password === \"\") {\n      setMessage(\"⚠️ Please fill all the fields\");\n      setErrorClass(\"error-box shake\");\n      setTimeout(() => setErrorClass(\"error-box\"), 500);\n      return;\n    }\n    setLoading(true);\n    setMessage(\"\");\n    try {\n      const accessToken = localStorage.getItem(token);\n      // const payload = JSON.parse(atob(token.split('.')[1]));\n      const payload = JSON.parse(atob(token.split('.')[1]));\n      if (Date.now() >= payload.exp * 1000) {\n        try {} catch (err) {}\n      }\n      const response = await api.post(\"/auth/login\", {\n        email: email,\n        password: password\n      });\n      // The backend should return tokens and role in data\n      const {\n        role,\n        token,\n        userId\n      } = response.data.data;\n      console.log(userId);\n\n      // Store tokens in sessionStorage\n      localStorage.setItem(\"token\", token);\n      localStorage.setItem(\"id\", userId);\n      setMessage(\"✅ Login successful! Redirecting...\");\n      setErrorClass(\"success-box\");\n      setTimeout(() => {\n        if (role === \"DOCTOR\") {\n          navigate(\"/doctorDashboard\");\n        } else if (role === \"PATIENT\") {\n          navigate(\"/patientDashboard\");\n        } else {\n          setMessage(\"⚠️ Unauthorized Role\");\n        }\n      }, 1000);\n    } catch (error) {\n      var _error$response, _error$response$data;\n      const errMsg = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || \"❌ Login failed due to an internal error.\";\n      setMessage(errMsg);\n      setErrorClass(\"error-box shake\");\n      setTimeout(() => setErrorClass(\"error-box\"), 500);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-body\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card login-card\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"login-title\",\n              children: \"Log In\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 15\n            }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: errorClass,\n              children: message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 27\n            }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n              className: \"login-form\",\n              onSubmit: handleSubmit,\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                name: \"email\",\n                placeholder: \"Enter Email\",\n                className: \"input-sec\",\n                style: {\n                  borderRadius: \"5px\"\n                },\n                onChange: handleInputChange,\n                value: email\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"password\",\n                name: \"password\",\n                placeholder: \"Enter Password\",\n                className: \"input-sec\",\n                style: {\n                  borderRadius: \"5px\"\n                },\n                onChange: handleInputChange,\n                value: password\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"btn submit-button btn-outline-success m-4\",\n                disabled: loading,\n                children: loading ? \"Logging in...\" : \"Submit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-center mt-3\",\n                children: [\"Don\\u2019t have an account?\", \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: \"/signup\",\n                  style: {\n                    textDecoration: \"underline\"\n                  },\n                  children: \"Sign up here\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 128,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(Login, \"Bxs9Mco2f2IuzvYn/d9ODgH2Mbo=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useNavigate","api","Navbar","jsxDEV","_jsxDEV","Fragment","_Fragment","Login","_s","navigate","email","setemail","password","setPassword","message","setMessage","errorClass","setErrorClass","loading","setLoading","handleInputChange","event","name","value","target","handleSubmit","preventDefault","setTimeout","accessToken","localStorage","getItem","token","payload","JSON","parse","atob","split","Date","now","exp","err","response","post","role","userId","data","console","log","setItem","error","_error$response","_error$response$data","errMsg","children","fileName","_jsxFileName","lineNumber","columnNumber","className","onSubmit","type","placeholder","style","borderRadius","onChange","disabled","href","textDecoration","_c","$RefreshReg$"],"sources":["/Users/alokwaigaonkar/health_care/FrontEnd/src/components/Doctor/Login.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport api from \"../../api\";\nimport \"../../css/login.css\";\nimport Navbar from \"../MainPage/Navbar\";\n\nexport default function Login() {\n  const navigate = useNavigate();\n\n  const [email, setemail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [errorClass, setErrorClass] = useState(\"error-box\");\n  const [loading, setLoading] = useState(false);\n\n  const handleInputChange = (event) => {\n    const { name, value } = event.target;\n    if (name === \"email\") setemail(value);\n    if (name === \"password\") setPassword(value);\n  };\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n\n    if (email === \"\" || password === \"\") {\n      setMessage(\"⚠️ Please fill all the fields\");\n      setErrorClass(\"error-box shake\");\n      setTimeout(() => setErrorClass(\"error-box\"), 500);\n      return;\n    }\n\n    setLoading(true);\n    setMessage(\"\");\n\n    try {\n      const accessToken = localStorage.getItem(token);\n      // const payload = JSON.parse(atob(token.split('.')[1]));\n      const payload = JSON.parse(atob(token.split('.')[1]));\n      if(Date.now()>=payload.exp*1000){\n        try{\n\n        }catch(err){\n          \n        }\n      }\n      const response = await api.post(\n        \"/auth/login\",\n        {\n          email: email,\n          password: password,\n        }\n      );\n      // The backend should return tokens and role in data\n      const { role,token,userId} = response.data.data;\n      console.log(userId)\n\n      // Store tokens in sessionStorage\n      localStorage.setItem(\"token\", token);\n      localStorage.setItem(\"id\", userId);\n\n      setMessage(\"✅ Login successful! Redirecting...\");\n      setErrorClass(\"success-box\");\n\n      setTimeout(() => {\n        if (role === \"DOCTOR\") {\n          navigate(\"/doctorDashboard\");\n        } else if (role === \"PATIENT\") {\n          navigate(\"/patientDashboard\");\n        } else {\n          setMessage(\"⚠️ Unauthorized Role\");\n        }\n      }, 1000);\n    } catch (error) {\n      const errMsg =\n        error.response?.data?.message ||\n        \"❌ Login failed due to an internal error.\";\n      setMessage(errMsg);\n      setErrorClass(\"error-box shake\");\n\n      setTimeout(() => setErrorClass(\"error-box\"), 500);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  \n\n  return (\n    <>\n      <Navbar />\n      <div className=\"login\">\n        <div className=\"login-body\">\n          <div className=\"card login-card\">\n            <div className=\"card-body\">\n              <h1 className=\"login-title\">Log In</h1>\n              {message && <div className={errorClass}>{message}</div>}\n\n              <form className=\"login-form\" onSubmit={handleSubmit}>\n                <input\n                  type=\"text\"\n                  name=\"email\"\n                  placeholder=\"Enter Email\"\n                  className=\"input-sec\"\n                  style={{ borderRadius: \"5px\" }}\n                  onChange={handleInputChange}\n                  value={email}\n                />\n                <input\n                  type=\"password\"\n                  name=\"password\"\n                  placeholder=\"Enter Password\"\n                  className=\"input-sec\"\n                  style={{ borderRadius: \"5px\" }}\n                  onChange={handleInputChange}\n                  value={password}\n                />\n\n                <button\n                  type=\"submit\"\n                  className=\"btn submit-button btn-outline-success m-4\"\n                  disabled={loading}\n                >\n                  {loading ? \"Logging in...\" : \"Submit\"}\n                </button>\n\n                <p className=\"text-center mt-3\">\n                  Don’t have an account?{\" \"}\n                  <a href=\"/signup\" style={{ textDecoration: \"underline\" }}>\n                    Sign up here\n                  </a>\n                </p>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}