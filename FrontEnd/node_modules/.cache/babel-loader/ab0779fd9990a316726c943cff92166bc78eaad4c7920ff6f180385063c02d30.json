{"ast":null,"code":"var _jsxFileName = \"/Users/alokwaigaonkar/health_care/FrontEnd/src/components/Doctor/Login.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport api from \"../../api\";\nimport \"../../css/login.css\";\nimport Navbar from \"../MainPage/Navbar\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Login() {\n  _s();\n  const navigate = useNavigate();\n  const [email, setemail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [errorClass, setErrorClass] = useState(\"error-box\");\n  const [loading, setLoading] = useState(false);\n  const handleSubmit = async event => {\n    event.preventDefault();\n    if (email === \"\" || password === \"\") {\n      setMessage(\"⚠️ Please fill all the fields\");\n      setErrorClass(\"error-box shake\");\n      setTimeout(() => setErrorClass(\"error-box\"), 500);\n      return;\n    }\n    setLoading(true);\n    setMessage(\"\");\n    try {\n      // ❌ DO NOT check or use old token here — fresh login should not depend on old token\n      // ✅ Just send email and password\n      const response = await api.post(\"/auth/login\", {\n        email: email,\n        password: password\n      });\n      const {\n        role,\n        token,\n        userId\n      } = response.data.data;\n\n      // ✅ Replace old token\n      localStorage.setItem(\"token\", token);\n      localStorage.setItem(\"id\", userId);\n      setMessage(\"✅ Login successful! Redirecting...\");\n      setErrorClass(\"success-box\");\n      setTimeout(() => {\n        if (role === \"DOCTOR\") {\n          navigate(\"/doctorDashboard\");\n        } else if (role === \"PATIENT\") {\n          navigate(\"/patientDashboard\");\n        } else {\n          setMessage(\"⚠️ Unauthorized Role\");\n        }\n      }, 1000);\n    } catch (error) {\n      var _error$response, _error$response$data;\n      const errMsg = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || \"❌ Login failed due to an internal error.\";\n      setMessage(errMsg);\n      setErrorClass(\"error-box shake\");\n      setTimeout(() => setErrorClass(\"error-box\"), 500);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-body\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card login-card\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"login-title\",\n              children: \"Log In\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 15\n            }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: errorClass,\n              children: message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 27\n            }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n              className: \"login-form\",\n              onSubmit: handleSubmit,\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                name: \"email\",\n                placeholder: \"Enter Email\",\n                className: \"input-sec\",\n                style: {\n                  borderRadius: \"5px\"\n                },\n                onChange: handleInputChange,\n                value: email\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"password\",\n                name: \"password\",\n                placeholder: \"Enter Password\",\n                className: \"input-sec\",\n                style: {\n                  borderRadius: \"5px\"\n                },\n                onChange: handleInputChange,\n                value: password\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 90,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"btn submit-button btn-outline-success m-4\",\n                disabled: loading,\n                children: loading ? \"Logging in...\" : \"Submit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-center mt-3\",\n                children: [\"Don\\u2019t have an account?\", \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: \"/signup\",\n                  style: {\n                    textDecoration: \"underline\"\n                  },\n                  children: \"Sign up here\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 110,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(Login, \"Bxs9Mco2f2IuzvYn/d9ODgH2Mbo=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useNavigate","api","Navbar","jsxDEV","_jsxDEV","Fragment","_Fragment","Login","_s","navigate","email","setemail","password","setPassword","message","setMessage","errorClass","setErrorClass","loading","setLoading","handleSubmit","event","preventDefault","setTimeout","response","post","role","token","userId","data","localStorage","setItem","error","_error$response","_error$response$data","errMsg","children","fileName","_jsxFileName","lineNumber","columnNumber","className","onSubmit","type","name","placeholder","style","borderRadius","onChange","handleInputChange","value","disabled","href","textDecoration","_c","$RefreshReg$"],"sources":["/Users/alokwaigaonkar/health_care/FrontEnd/src/components/Doctor/Login.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport api from \"../../api\";\nimport \"../../css/login.css\";\nimport Navbar from \"../MainPage/Navbar\";\n\nexport default function Login() {\n  const navigate = useNavigate();\n\n  const [email, setemail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [errorClass, setErrorClass] = useState(\"error-box\");\n  const [loading, setLoading] = useState(false);\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n  \n    if (email === \"\" || password === \"\") {\n      setMessage(\"⚠️ Please fill all the fields\");\n      setErrorClass(\"error-box shake\");\n      setTimeout(() => setErrorClass(\"error-box\"), 500);\n      return;\n    }\n  \n    setLoading(true);\n    setMessage(\"\");\n  \n    try {\n      // ❌ DO NOT check or use old token here — fresh login should not depend on old token\n      // ✅ Just send email and password\n      const response = await api.post(\"/auth/login\", {\n        email: email,\n        password: password,\n      });\n  \n      const { role, token, userId } = response.data.data;\n  \n      // ✅ Replace old token\n      localStorage.setItem(\"token\", token);\n      localStorage.setItem(\"id\", userId);\n  \n      setMessage(\"✅ Login successful! Redirecting...\");\n      setErrorClass(\"success-box\");\n  \n      setTimeout(() => {\n        if (role === \"DOCTOR\") {\n          navigate(\"/doctorDashboard\");\n        } else if (role === \"PATIENT\") {\n          navigate(\"/patientDashboard\");\n        } else {\n          setMessage(\"⚠️ Unauthorized Role\");\n        }\n      }, 1000);\n  \n    } catch (error) {\n      const errMsg =\n        error.response?.data?.message ||\n        \"❌ Login failed due to an internal error.\";\n      setMessage(errMsg);\n      setErrorClass(\"error-box shake\");\n      setTimeout(() => setErrorClass(\"error-box\"), 500);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  \n\n  return (\n    <>\n      <Navbar />\n      <div className=\"login\">\n        <div className=\"login-body\">\n          <div className=\"card login-card\">\n            <div className=\"card-body\">\n              <h1 className=\"login-title\">Log In</h1>\n              {message && <div className={errorClass}>{message}</div>}\n\n              <form className=\"login-form\" onSubmit={handleSubmit}>\n                <input\n                  type=\"text\"\n                  name=\"email\"\n                  placeholder=\"Enter Email\"\n                  className=\"input-sec\"\n                  style={{ borderRadius: \"5px\" }}\n                  onChange={handleInputChange}\n                  value={email}\n                />\n                <input\n                  type=\"password\"\n                  name=\"password\"\n                  placeholder=\"Enter Password\"\n                  className=\"input-sec\"\n                  style={{ borderRadius: \"5px\" }}\n                  onChange={handleInputChange}\n                  value={password}\n                />\n\n                <button\n                  type=\"submit\"\n                  className=\"btn submit-button btn-outline-success m-4\"\n                  disabled={loading}\n                >\n                  {loading ? \"Logging in...\" : \"Submit\"}\n                </button>\n\n                <p className=\"text-center mt-3\">\n                  Don’t have an account?{\" \"}\n                  <a href=\"/signup\" style={{ textDecoration: \"underline\" }}>\n                    Sign up here\n                  </a>\n                </p>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,GAAG,MAAM,WAAW;AAC3B,OAAO,qBAAqB;AAC5B,OAAOC,MAAM,MAAM,oBAAoB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAExC,eAAe,SAASC,KAAKA,CAAA,EAAG;EAAAC,EAAA;EAC9B,MAAMC,QAAQ,GAAGT,WAAW,CAAC,CAAC;EAE9B,MAAM,CAACU,KAAK,EAAEC,QAAQ,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACa,QAAQ,EAAEC,WAAW,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACe,OAAO,EAAEC,UAAU,CAAC,GAAGhB,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACiB,UAAU,EAAEC,aAAa,CAAC,GAAGlB,QAAQ,CAAC,WAAW,CAAC;EACzD,MAAM,CAACmB,OAAO,EAAEC,UAAU,CAAC,GAAGpB,QAAQ,CAAC,KAAK,CAAC;EAE7C,MAAMqB,YAAY,GAAG,MAAOC,KAAK,IAAK;IACpCA,KAAK,CAACC,cAAc,CAAC,CAAC;IAEtB,IAAIZ,KAAK,KAAK,EAAE,IAAIE,QAAQ,KAAK,EAAE,EAAE;MACnCG,UAAU,CAAC,+BAA+B,CAAC;MAC3CE,aAAa,CAAC,iBAAiB,CAAC;MAChCM,UAAU,CAAC,MAAMN,aAAa,CAAC,WAAW,CAAC,EAAE,GAAG,CAAC;MACjD;IACF;IAEAE,UAAU,CAAC,IAAI,CAAC;IAChBJ,UAAU,CAAC,EAAE,CAAC;IAEd,IAAI;MACF;MACA;MACA,MAAMS,QAAQ,GAAG,MAAMvB,GAAG,CAACwB,IAAI,CAAC,aAAa,EAAE;QAC7Cf,KAAK,EAAEA,KAAK;QACZE,QAAQ,EAAEA;MACZ,CAAC,CAAC;MAEF,MAAM;QAAEc,IAAI;QAAEC,KAAK;QAAEC;MAAO,CAAC,GAAGJ,QAAQ,CAACK,IAAI,CAACA,IAAI;;MAElD;MACAC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEJ,KAAK,CAAC;MACpCG,YAAY,CAACC,OAAO,CAAC,IAAI,EAAEH,MAAM,CAAC;MAElCb,UAAU,CAAC,oCAAoC,CAAC;MAChDE,aAAa,CAAC,aAAa,CAAC;MAE5BM,UAAU,CAAC,MAAM;QACf,IAAIG,IAAI,KAAK,QAAQ,EAAE;UACrBjB,QAAQ,CAAC,kBAAkB,CAAC;QAC9B,CAAC,MAAM,IAAIiB,IAAI,KAAK,SAAS,EAAE;UAC7BjB,QAAQ,CAAC,mBAAmB,CAAC;QAC/B,CAAC,MAAM;UACLM,UAAU,CAAC,sBAAsB,CAAC;QACpC;MACF,CAAC,EAAE,IAAI,CAAC;IAEV,CAAC,CAAC,OAAOiB,KAAK,EAAE;MAAA,IAAAC,eAAA,EAAAC,oBAAA;MACd,MAAMC,MAAM,GACV,EAAAF,eAAA,GAAAD,KAAK,CAACR,QAAQ,cAAAS,eAAA,wBAAAC,oBAAA,GAAdD,eAAA,CAAgBJ,IAAI,cAAAK,oBAAA,uBAApBA,oBAAA,CAAsBpB,OAAO,KAC7B,0CAA0C;MAC5CC,UAAU,CAACoB,MAAM,CAAC;MAClBlB,aAAa,CAAC,iBAAiB,CAAC;MAChCM,UAAU,CAAC,MAAMN,aAAa,CAAC,WAAW,CAAC,EAAE,GAAG,CAAC;IACnD,CAAC,SAAS;MACRE,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAID,oBACEf,OAAA,CAAAE,SAAA;IAAA8B,QAAA,gBACEhC,OAAA,CAACF,MAAM;MAAAmC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eACVpC,OAAA;MAAKqC,SAAS,EAAC,OAAO;MAAAL,QAAA,eACpBhC,OAAA;QAAKqC,SAAS,EAAC,YAAY;QAAAL,QAAA,eACzBhC,OAAA;UAAKqC,SAAS,EAAC,iBAAiB;UAAAL,QAAA,eAC9BhC,OAAA;YAAKqC,SAAS,EAAC,WAAW;YAAAL,QAAA,gBACxBhC,OAAA;cAAIqC,SAAS,EAAC,aAAa;cAAAL,QAAA,EAAC;YAAM;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,EACtC1B,OAAO,iBAAIV,OAAA;cAAKqC,SAAS,EAAEzB,UAAW;cAAAoB,QAAA,EAAEtB;YAAO;cAAAuB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eAEvDpC,OAAA;cAAMqC,SAAS,EAAC,YAAY;cAACC,QAAQ,EAAEtB,YAAa;cAAAgB,QAAA,gBAClDhC,OAAA;gBACEuC,IAAI,EAAC,MAAM;gBACXC,IAAI,EAAC,OAAO;gBACZC,WAAW,EAAC,aAAa;gBACzBJ,SAAS,EAAC,WAAW;gBACrBK,KAAK,EAAE;kBAAEC,YAAY,EAAE;gBAAM,CAAE;gBAC/BC,QAAQ,EAAEC,iBAAkB;gBAC5BC,KAAK,EAAExC;cAAM;gBAAA2B,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACd,CAAC,eACFpC,OAAA;gBACEuC,IAAI,EAAC,UAAU;gBACfC,IAAI,EAAC,UAAU;gBACfC,WAAW,EAAC,gBAAgB;gBAC5BJ,SAAS,EAAC,WAAW;gBACrBK,KAAK,EAAE;kBAAEC,YAAY,EAAE;gBAAM,CAAE;gBAC/BC,QAAQ,EAAEC,iBAAkB;gBAC5BC,KAAK,EAAEtC;cAAS;gBAAAyB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACjB,CAAC,eAEFpC,OAAA;gBACEuC,IAAI,EAAC,QAAQ;gBACbF,SAAS,EAAC,2CAA2C;gBACrDU,QAAQ,EAAEjC,OAAQ;gBAAAkB,QAAA,EAEjBlB,OAAO,GAAG,eAAe,GAAG;cAAQ;gBAAAmB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC/B,CAAC,eAETpC,OAAA;gBAAGqC,SAAS,EAAC,kBAAkB;gBAAAL,QAAA,GAAC,6BACR,EAAC,GAAG,eAC1BhC,OAAA;kBAAGgD,IAAI,EAAC,SAAS;kBAACN,KAAK,EAAE;oBAAEO,cAAc,EAAE;kBAAY,CAAE;kBAAAjB,QAAA,EAAC;gBAE1D;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAG,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACA,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACJ;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAAA,eACN,CAAC;AAEP;AAAChC,EAAA,CAlHuBD,KAAK;EAAA,QACVP,WAAW;AAAA;AAAAsD,EAAA,GADN/C,KAAK;AAAA,IAAA+C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}